<!DOCTYPE html>
<html lang="mr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>कार्यशाळा | सारथी - विजयाचे आधुनिक महातंत्र</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Mukta:wght@400;600;700;800&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Mukta', sans-serif; background-color: #020617; color: white; overflow-x: hidden; scroll-behavior: smooth; }
        .bg-card { background: linear-gradient(to bottom, rgba(2, 6, 23, 0.8), rgba(2, 6, 23, 0.95)), url('assets/images/victory-procession.jpg'); background-size: cover; background-position: center; background-attachment: fixed; }
        .countdown-box { background: #facc15; color: black; padding: 10px 15px; border-radius: 8px; font-weight: 800; min-width: 95px; text-align: center; box-shadow: 0 5px 15px rgba(250, 204, 21, 0.3); }
        .price-tag { background: rgba(34, 197, 94, 0.1); border: 1px solid #22c55e; color: #4ade80; padding: 8px 25px; border-radius: 50px; display: inline-block; font-weight: 800; font-size: 1.25rem; margin-bottom: 20px; }
        .glass-form { background: rgba(15, 23, 42, 0.85); backdrop-filter: blur(15px); border: 1px solid rgba(250, 204, 21, 0.2); border-radius: 2.5rem; }
        .date-badge { background: rgba(250, 204, 21, 0.1); border: 1px solid #facc15; color: #facc15; padding: 5px 20px; border-radius: 50px; display: inline-block; font-weight: 800; text-transform: uppercase; margin-bottom: 15px; }
    </style>
</head>
<body>

<header class="fixed w-full z-50 bg-slate-950/90 backdrop-blur-md border-b border-yellow-500/20">
    <div class="max-w-7xl mx-auto flex justify-between items-center p-4 px-6">
        <div class="flex flex-col text-left">
            <h1 class="text-3xl font-black italic text-yellow-500 tracking-tighter leading-none">सारथी</h1>
            <p class="text-[9px] uppercase tracking-[0.3em] text-gray-400 mt-1 font-bold italic">विजयाचा आधुनिक साथीदार</p>
        </div>
        <nav class="hidden md:flex space-x-8 text-xs font-bold uppercase tracking-widest text-gray-300">
            <a href="index.html" class="hover:text-yellow-500 transition">मुख्य</a>
            <a href="sewa.html" class="hover:text-yellow-500 transition">सेवा</a>
            <a href="Contact.html" class="hover:text-yellow-500 transition">संपर्क</a>
        </nav>
    </div>
</header>

<main class="pt-24">
    <section class="bg-card text-center py-20 px-4 border-b border-white/5">
        <div class="date-badge">१० मे २०२६</div>
        <h2 class="text-4xl md:text-6xl font-black text-yellow-400 mb-4 uppercase italic">जिल्हा परिषद कार्यशाळा</h2>
        <div class="price-tag">प्रवेश शुल्क: ₹ 2,100 <span class="text-sm font-normal opacity-70">+ GST</span></div>
        <div class="flex justify-center space-x-4 mb-8">
            <div class="countdown-box" id="days-zp">00 दिवस</div>
            <div class="countdown-box" id="hours-zp">00 तास</div>
            <div class="countdown-box" id="minutes-zp">00 मिनिटे</div>
        </div>
        <a href="#registration" class="bg-yellow-400 text-black px-10 py-4 rounded-full font-black uppercase shadow-xl hover:bg-white transition">नोंदणी करा</a>
    </section>

    <section class="bg-card text-center py-20 px-4 border-b border-white/5">
        <div class="date-badge">२५ मे २०२६</div>
        <h2 class="text-4xl md:text-6xl font-black text-yellow-400 mb-4 uppercase italic">पंचायत समिती कार्यशाळा</h2>
        <div class="price-tag">प्रवेश शुल्क: ₹ 2,100 <span class="text-sm font-normal opacity-70">+ GST</span></div>
        <div class="flex justify-center space-x-4 mb-8">
            <div class="countdown-box" id="days-ps">00 दिवस</div>
            <div class="countdown-box" id="hours-ps">00 तास</div>
            <div class="countdown-box" id="minutes-ps">00 मिनिटे</div>
        </div>
        <a href="#registration" class="bg-yellow-400 text-black px-10 py-4 rounded-full font-black uppercase shadow-xl hover:bg-white transition">नोंदणी करा</a>
    </section>

    <section class="bg-card text-center py-20 px-4">
        <div class="date-badge">१५ जून २०२६</div>
        <h2 class="text-4xl md:text-6xl font-black text-yellow-400 mb-4 uppercase italic">ग्रामपंचायत कार्यशाळा</h2>
        <div class="price-tag">प्रवेश शुल्क: ₹ 2,100 <span class="text-sm font-normal opacity-70">+ GST</span></div>
        <div class="flex justify-center space-x-4 mb-8">
            <div class="countdown-box" id="days-gp">00 दिवस</div>
            <div class="countdown-box" id="hours-gp">00 तास</div>
            <div class="countdown-box" id="minutes-gp">00 मिनिटे</div>
        </div>
        <a href="#registration" class="bg-yellow-400 text-black px-10 py-4 rounded-full font-black uppercase shadow-xl hover:bg-white transition">नोंदणी करा</a>
    </section>
</main>

<section id="registration" class="py-24 px-6 bg-slate-950">
    <div class="max-w-lg mx-auto glass-form p-12 text-center shadow-2xl shadow-yellow-500/10">
        <h3 class="text-3xl font-black text-white uppercase italic mb-10 tracking-tighter">प्रवेश निश्चित करा</h3>
        
        <form id="leadForm" class="space-y-5 text-left">
            <label class="text-gray-400 text-xs uppercase font-bold tracking-widest ml-2">तुमचे पूर्ण नाव</label>
            <input type="text" name="Full Name" class="w-full p-4 rounded-xl bg-white/5 border border-white/10 text-white outline-none focus:border-yellow-500" required>
            
            <label class="text-gray-400 text-xs uppercase font-bold tracking-widest ml-2">मोबाईल नंबर</label>
            <input type="tel" name="Mobile" class="w-full p-4 rounded-xl bg-white/5 border border-white/10 text-white outline-none focus:border-yellow-500" required>

            <label class="text-gray-400 text-xs uppercase font-bold tracking-widest ml-2">पिन कोड (PIN Code)</label>
            <input type="number" id="pincode" name="Pincode" placeholder="उदा. 411001" class="w-full p-4 rounded-xl bg-white/5 border border-white/10 text-white outline-none focus:border-yellow-500" required>

            <div class="grid grid-cols-2 gap-4">
                <input type="text" id="state" name="State" placeholder="राज्य" class="w-full p-4 rounded-xl bg-white/5 border border-white/10 text-gray-500 outline-none" readonly>
                <input type="text" id="district" name="District" placeholder="जिल्हा" class="w-full p-4 rounded-xl bg-white/5 border border-white/10 text-gray-500 outline-none" readonly>
            </div>

            <label class="text-gray-400 text-xs uppercase font-bold tracking-widest ml-2">पोस्ट ऑफिस निवडा</label>
            <select id="postOfficeList" name="Post Office" class="w-full p-4 rounded-xl bg-white/5 border border-white/10 text-gray-300 outline-none focus:border-yellow-500" required>
                <option value="">-- आधी पिन कोड टाका --</option>
            </select>

            <label class="text-gray-400 text-xs uppercase font-bold tracking-widest ml-2">गाव (बदलण्यासाठी येथे क्लिक करा)</label>
            <input type="text" id="village" name="Village" placeholder="गावाचे नाव लिहा" class="w-full p-4 rounded-xl bg-white/5 border border-white/10 text-white outline-none focus:border-yellow-500" required>

            <label class="text-gray-400 text-xs uppercase font-bold tracking-widest ml-2">तालुका</label>
            <input type="text" id="taluka" name="Taluka" placeholder="तालुका" class="w-full p-4 rounded-xl bg-white/5 border border-white/10 text-white outline-none focus:border-yellow-500" required>
            
            <label class="text-gray-400 text-xs uppercase font-bold tracking-widest ml-2">कार्यशाळा निवडा</label>
            <select name="Election Type" class="w-full p-4 rounded-xl bg-white/5 border border-white/10 text-gray-400 outline-none focus:border-yellow-500">
                <option value="ZP">जिल्हा परिषद</option>
                <option value="PS">पंचायत समिती</option>
                <option value="GP" selected>ग्रामपंचायत</option>
            </select>

            <input type="hidden" name="Payment Status" value="Pending">
            
            <button type="submit" id="submitBtn" class="bg-yellow-500 text-black px-6 py-5 rounded-xl font-black w-full uppercase tracking-widest text-lg shadow-xl shadow-yellow-500/20 mt-6 hover:bg-white transition">नोंदणी सबमिट करा</button>
        </form>
    </div>
</section>

<script>
    // 1. PIN CODE API WITH DROPDOWN OPTIONS
    document.getElementById('pincode').addEventListener('input', function() {
        const pincode = this.value;
        const postSelect = document.getElementById('postOfficeList');
        const villageInput = document.getElementById('village');

        if (pincode.length === 6) {
            postSelect.innerHTML = '<option value="">शोधत आहे...</option>';
            fetch(`https://api.postalpincode.in/pincode/${pincode}`)
                .then(response => response.json())
                .then(data => {
                    if (data[0].Status === "Success") {
                        const offices = data[0].PostOffice;
                        document.getElementById('state').value = offices[0].State;
                        document.getElementById('district').value = offices[0].District;
                        document.getElementById('taluka').value = offices[0].Block;

                        postSelect.innerHTML = '<option value="">-- पोस्ट ऑफिस निवडा --</option>';
                        offices.forEach(office => {
                            const option = document.createElement('option');
                            option.value = office.Name;
                            option.textContent = office.Name;
                            postSelect.appendChild(option);
                        });
                    } else {
                        alert("पिन कोड सापडला नाही!");
                        postSelect.innerHTML = '<option value="">-- चुकीचा पिन कोड --</option>';
                    }
                });
        }
    });

    // पोस्ट ऑफिस निवडल्यावर गाव फील्ड मध्ये नाव भरणे पण युजरला ते बदलता येईल
    document.getElementById('postOfficeList').addEventListener('change', function() {
        document.getElementById('village').value = this.value;
    });

    // 2. COUNTDOWN SCRIPT
    function setupCountdown(id, dateStr) {
        const eventDate = new Date(dateStr).getTime();
        setInterval(function() {
            const distance = eventDate - new Date().getTime();
            if (distance < 0) return;
            document.getElementById("days-"+id).innerHTML = Math.floor(distance / (1000 * 60 * 60 * 24)) + " दिवस";
            document.getElementById("hours-"+id).innerHTML = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)) + " तास";
            document.getElementById("minutes-"+id).innerHTML = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60)) + " मिनिटे";
        }, 1000);
    }
    setupCountdown("zp", "May 10, 2026 10:00:00");
    setupCountdown("ps", "May 25, 2026 10:00:00");
    setupCountdown("gp", "June 15, 2026 10:00:00");

    // 3. GOOGLE SHEETS SUBMISSION (STRICT CORS-FRIENDLY FETCH)
    const scriptURL = 'https://script.google.com/macros/s/AKfycbz0X93jaRhbGH5hXzYwrc6MreC2uu3PWR1eIePJqZSumcKgJohPsoVZaBjlobJYcAfugQ/exec';
    const form = document.getElementById('leadForm');
    const btn = document.getElementById('submitBtn');

    form.addEventListener('submit', e => {
        e.preventDefault();
        btn.disabled = true; 
        btn.innerHTML = "नोंदणी होत आहे...";

        // URLSearchParams वापरल्यामुळे 'अडचण आली' एरर येत नाही
        fetch(scriptURL, { 
            method: 'POST', 
            mode: 'no-cors', // CORS ब्लॉक टाळण्यासाठी
            body: new FormData(form)
        })
        .then(() => { 
            alert("नोंदणी यशस्वी! आता प्रशिक्षणाचे शुल्क भरा."); 
            window.location.href = "payment.html"; 
        })
        .catch(error => { 
            console.error('Error!', error.message);
            alert("नेटवर्कमध्ये काहीतरी अडचण आली आहे, कृपया पुन्हा प्रयत्न करा."); 
            btn.disabled = false; 
            btn.innerHTML = "नोंदणी सबमिट करा";
        });
    });
</script>
</body>

</html>

